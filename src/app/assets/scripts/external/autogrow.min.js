!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){t.fn.autogrow=function(r){return r=t.extend({vertical:!0,horizontal:!1,characterSlop:0},r),this.filter("textarea,input").each(function(){var n=t(this),a="border-box"===n.css("box-sizing"),o=n.attr("maxHeight"),s=void 0===n.attr("minWidth")?0:n.attr("minWidth");void 0===o&&(o=1e6);var c=t('<div class="autogrow-shadow"></div>').css({position:"absolute",top:-1e4,left:-1e4,fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),lineHeight:n.css("lineHeight"),paddingLeft:n.css("paddingLeft"),paddingRight:n.css("paddingRight"),paddingTop:n.css("paddingTop"),paddingBottom:n.css("paddingBottom"),borderTop:n.css("borderTop"),borderBottom:n.css("borderBottom"),borderLeft:n.css("borderLeft"),borderRight:n.css("borderRight"),resize:"none"}).appendTo(document.body);c.html("a");var h=c.width();c.html("");var d=function(e){if(void 0===e&&(e=this.value),""===e&&t(this).attr("placeholder")&&(e=t(this).attr("placeholder")),r.vertical?e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(t){return function(t,e){for(var i=0,r="";i<e;i++)r+=t;return r}("&nbsp;",t.length-1)+" "}):e=String(e).replace(/[&<>"'\/\ ]/g,function(t){return i[t]}),c.html(e).css("width","auto"),r.horizontal){var d=r.characterSlop*h+2,l=Math.max(c.width()+d,s),g=r.maxWidth;g&&(l=Math.min(l,g)),t(this).css("width",l)}if(r.vertical){var u=t(this).width();a||(u=u-parseInt(n.css("paddingLeft"),10)-parseInt(n.css("paddingRight"),10)),c.css("width",u);var p=a?c.outerHeight():c.height();t(this).css("height","auto"),minHeight=a?n.outerHeight():n.height();var f=Math.min(Math.max(p,minHeight),o);t(this).css("height",f),t(this).css("overflow",f==o?"auto":"hidden")}};t(this).change(function(){return d.call(this),!0}).keyup(function(){return d.call(this),!0}).keypress(function(t){if(!t.ctrlKey&&!t.metaKey){var i=this.value,r=e(this),n=13===t.which?"\n":String.fromCharCode(t.which),a=i.slice(0,r.start)+n+i.slice(r.end);return d.call(this,a),!0}}).bind("update.autogrow",function(){d.apply(this)}).bind("remove.autogrow",function(){c.remove()}),d.apply(this)}),this};var e=function(t){var e={text:"",start:0,end:0};if(!t.value)return e;try{if(window.getSelection)e.start=t.selectionStart,e.end=t.selectionEnd,e.text=t.value.slice(e.start,e.end);else if(doc.selection){t.focus();var i=doc.selection.createRange(),r=doc.body.createTextRange();e.text=i.text;try{r.moveToElementText(t),r.setEndPoint("StartToStart",i)}catch(e){(r=t.createTextRange()).setEndPoint("StartToStart",i)}e.start=t.value.length-r.text.length,e.end=e.start+i.text.length}}catch(t){}return e},i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"," ":"&nbsp;"}});